function gfapiCalculateSig(e,r){var a=CryptoJS.HmacSHA1(e,r).toString(CryptoJS.enc.Base64);return encodeURIComponent(a)}jQuery(document).ready(function(){jQuery("#gfwebapi-qrbutton").click(function(){jQuery("#gfwebapi-qrcode-container").toggle();var e=jQuery("#gfwebapi-qrcode");return 0<e.length&&e.attr("src",ajaxurl+"?action=gfwebapi_qrcode&rnd="+Date.now()),!1}),jQuery("#public_key, #private_key").on("keyup",function(){jQuery("#gfwebapi-qrcode-container").html("The keys have changes. Please save the changes and try again.")}),jQuery("#gfapi-url-builder-button").click(function(e){var r,a,t,u,i,n,l;e.preventDefault(),r=jQuery("#public_key").val(),a=jQuery("#private_key").val(),t=parseInt(jQuery("#gfapi-url-builder-expiration").val()),u=jQuery("#gfapi-url-builder-method").val(),i=(i=jQuery("#gfapi-url-builder-route").val()).replace(/\/$/,"");var o=new Date,c=parseInt(o.getTime()/1e3)+t;return l=gfapiCalculateSig(r+":"+u+":"+i+":"+c,a),n=gfapiBaseUrl+"/"+i+"/?api_key="+r+"&signature="+l+"&expires="+c,jQuery("#gfapi-url-builder-generated-url").val(n),!1}),jQuery("#gfapi-url-tester-button").click(function(e){var t=jQuery(this),u=jQuery("#gfapi-url-tester-loading"),i=jQuery("#gfapi-url-tester-results"),r=jQuery("#gfapi-url-tester-url").val(),a=jQuery("#gfapi-url-tester-method").val();return jQuery.ajax({url:r+"&test=1",type:a,dataType:"json",data:{},beforeSend:function(e,r){t.attr("disabled","disabled"),u.show()}}).done(function(e,r,a){t.removeAttr("disabled"),u.hide(),i.html(a.status),i.fadeTo("fast",1)}).fail(function(e){var r;t.removeAttr("disabled"),u.hide(),i.fadeTo("fast",1),u.hide(),r="abort"==r?"Request cancelled":e.status+": "+e.statusText,i.html(r)}),!1})});