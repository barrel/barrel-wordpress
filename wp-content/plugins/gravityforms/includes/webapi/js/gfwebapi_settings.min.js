function gfapiCalculateSig(a,b){var c=CryptoJS.HmacSHA1(a,b),d=c.toString(CryptoJS.enc.Base64);return encodeURIComponent(d)}jQuery(document).ready(function(){jQuery("#gfwebapi-qrbutton").click(function(){jQuery("#gfwebapi-qrcode-container").toggle();var a=jQuery("#gfwebapi-qrcode");return a.length>0&&a.attr("src",ajaxurl+"?action=gfwebapi_qrcode&rnd="+Date.now()),!1}),jQuery("#public_key, #private_key").on("keyup",function(){jQuery("#gfwebapi-qrcode-container").html("The keys have changes. Please save the changes and try again.")}),jQuery("#gfapi-url-builder-button").click(function(a){a.preventDefault();var b,c,d,e,f,g,h,i;b=jQuery("#public_key").val(),c=jQuery("#private_key").val(),d=parseInt(jQuery("#gfapi-url-builder-expiration").val()),e=jQuery("#gfapi-url-builder-method").val(),f=jQuery("#gfapi-url-builder-route").val(),f=f.replace(/\/$/,"");var j=new Date,k=parseInt(j.getTime()/1e3),l=k+d;return g=b+":"+e+":"+f+":"+l,i=gfapiCalculateSig(g,c),h=gfapiBaseUrl+"/"+f+"/?api_key="+b+"&signature="+i+"&expires="+l,jQuery("#gfapi-url-builder-generated-url").val(h),!1});var a;jQuery("#gfapi-url-tester-button").click(function(b){var c=jQuery(this),d=jQuery("#gfapi-url-tester-loading"),e=jQuery("#gfapi-url-tester-results"),f=jQuery("#gfapi-url-tester-url").val(),g=jQuery("#gfapi-url-tester-method").val();return a=jQuery.ajax({url:f+"&test=1",type:g,dataType:"json",data:{},beforeSend:function(a,b){c.attr("disabled","disabled"),d.show()}}).done(function(a,b,f){c.removeAttr("disabled"),d.hide(),e.html(f.status),e.fadeTo("fast",1)}).fail(function(a){c.removeAttr("disabled"),d.hide(),e.fadeTo("fast",1);var b;d.hide(),b="abort"==b?"Request cancelled":a.status+": "+a.statusText,e.html(b)}),!1})});