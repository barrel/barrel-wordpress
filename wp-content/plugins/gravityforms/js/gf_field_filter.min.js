!function(a,b){function c(a,c,e,f,g){w=b(a),w.css("position","relative").html('<div id="gform-field-filters"></div>'),E=g,C=void 0!==E&&E>0,x={is:"is",isnot:"isNot",">":"greaterThan","<":"lessThan",contains:"contains",starts_with:"startsWith",ends_with:"endsWith"},B=gf_vars.baseUrl+"/images",y=c,z=e&&e.filters?e.filters:[],A=e&&e.mode?e.mode:"all",D=!(void 0!==f&&!f),d(z)}function d(a){var c;if(w.on("change",".gform-filter-field",function(){i(this)}),w.on("click","#gform-no-filters",function(a){0==b(".gform-field-filter").length&&u(this),b(this).remove()}),w.on("click",".gform-add",function(){u(this)}),w.on("click",".gform-remove",function(){v(this)}),w.on("change",".gform-filter-operator",function(){h(this,this.value)}),void 0===a||0==a.length)return void p();for("off"!=A&&b("#gform-field-filters").append(r(A)),c=0;c<a.length;c++)b("#gform-field-filters").append(e());b(".gform-filter-field").each(function(b){var c=a[b].field;jQuery(this).val(c),i(this)}),b(".gform-filter-operator").each(function(b){var c=a[b].operator;jQuery(this).val(c),h(this,this.value)}),b(".gform-filter-value").each(function(b){var c=a[b].value;jQuery(this).val(c),jQuery(this).change()}),o()}function e(){var a;return a="<div class='gform-field-filter'>",a+=f()+k()+l()+n(),a+="</div>"}function f(){var a,b,c=[];for(c.push("<select class='gform-filter-field' name='f[]' >"),a=0;a<y.length;a++)b=g(y[a]),c.push(b);return c.push("</select>"),c.push("<input type='hidden' class='gform-filter-type' name='t[]' value='' >"),c.join("")}function g(a,b){b||(b=0);var c,d,e,f,h,i,k,l,m,n,o,p="",q=[],r="&nbsp;&nbsp;&nbsp;&nbsp;";if(d=a.key,a.group){for(k=a.filters.length,i=[],n=a.isNestable?b+1:b,c=0;c<k;c++)l=a.filters[c],l.group?(m=g(l,n),i.push(m)):(o=r.repeat(n),f=o+l.text,e=l.key,p=j(e)?'disabled="disabled"':"",i.push('<option {0} value="{1}">{2}</option>'.format(p,e,f)));o=r.repeat(b),h=o+a.text,a.isNestable?q.push('<optgroup label="{0}"></optgroup>{1}'.format(h,i.join(""))):q.push('<optgroup label="{0}">{1}</optgroup>'.format(h,i.join("")))}else p=a.preventMultiple&&j(d)?"disabled='disabled'":"",f=a.text,q.push('<option {0} value="{1}">{2}</option>'.format(p,d,f));return q.join("")}function h(a){var c=b(a),d=c.siblings(".gform-filter-field"),e=m(d.val());e&&c.siblings(".gform-filter-value").replaceWith(l(e,a.value)),q(),window.gformInitDatepicker&&gformInitDatepicker()}function i(a){var c=m(a.value);if(c){var d=b(a);d.siblings(".gform-filter-value").replaceWith(l(c)),d.siblings(".gform-filter-type").val(c.type),d.siblings(".gform-filter-operator").replaceWith(k(c)),d.siblings(".gform-filter-operator").change()}q()}function j(a){a=a.toString();var c=[];return b(".gform-filter-field :selected").each(function(a,d){c[a]=b(d).val()}),b.inArray(a,c)>-1}function k(a){var b,c,d="<select name='o[]' class='gform-filter-operator'>";if(a)for(b=0;b<a.operators.length;b++)c=a.operators[b],d+='<option value="{0}">{1}</option>'.format(c,gf_vars[x[c]]);return d+="</select>"}function l(a,c){var d,e,f,g,h,i,j="";if(i="gform-filter-value",a&&void 0!==a.cssClass&&(i+=" "+a.cssClass),a&&a.values&&"contains"!=c){for(void 0!==a.placeholder&&(j+='<option value="">{0}</option>'.format(a.placeholder)),d=0;d<a.values.length;d++)e=a.values[d].value,f=a.values[d].text,a.values[d].operators&&-1===b.inArray(c,a.values[d].operators)||(j+='<option value="{0}">{1}</option>'.format(e,f));g="<select name='v[]' class='{0}'>{1}</select>".format(i,j)}else h=a&&void 0!==a.placeholder?"placeholder='{0}'".format(a.placeholder):"",g="<input type='text' value='' name='v[]' class='{0}' {1}/>".format(i,h);return g}function m(a,b){var c;if(a){b||(b=y);for(var d=0;d<b.length;d++){if(a==b[d].key)return b[d];if(b[d].group&&(c=m(a,b[d].filters)))return c}}}function n(){var a="";return D?(a+="<img class='gform-add' src='{0}/add.png' alt='{1}' title='{2}'>".format(B,gf_vars.addFieldFilter,gf_vars.addFieldFilter),a+="<img class='gform-remove' src='"+B+"/remove.png' alt='"+gf_vars.removeFieldFilter+"' title='"+gf_vars.removeFieldFilter+"'>"):a}function o(){if(C){var a=b("#gform-field-filters");if(b(".gform-field-filter").length<=1)return void(b(w).hasClass("ui-resizable")&&w.resizable("destroy"));a.get(0).scrollHeight>w.height()||w.height()>=E?(w.css({"min-height":E+"px","border-bottom":"5px double #DDD"}).resizable({handles:"s",minHeight:E}),a.css("min-height",E)):w.css({"min-height":"","border-bottom":""})}}function p(){var a="";a+="<div id='gform-no-filters' >"+gf_vars.addFieldFilter,a+="<img class='gform-add' src='{0}/add.png' alt='{1}' title='{2}'></div>".format(B,gf_vars.addFieldFilter,gf_vars.addFieldFilter),b("#gform-field-filters").html(a),C&&(w.css({"min-height":"","border-bottom":""}),w.height(80),b("#gform-field-filters").css("min-height",""))}function q(){b("select.gform-filter-field option").removeAttr("disabled"),b("select.gform-filter-field").each(function(a){var c=m(this.value);void 0!==c&&c.preventMultiple&&j(this.value)&&b("select.gform-filter-field option[value='"+this.value+"']:not(:selected)").attr("disabled","disabled")})}function r(a){var b;return b='<select name="mode"><option value="all" {0}>{1}</option><option value="any" {2}>{3}</option></select>'.format(s("all",a),gf_vars.all,s("any",a),gf_vars.any),b=gf_vars.filterAndAny.format(b)}function s(a,b){return a==b?'selected="selected"':""}function t(a){a.after(r())}function u(a){var c,d;c=b(a),d=c.is("img")?c.parent():c,d.after(e()),d.next("div").find(".gform-filter-field").change().find(".gform-filter-operator").change(),1==b(".gform-field-filter").length&&t(d),o()}function v(a){b(a).parent().remove(),0==b(".gform-field-filter").length&&p(),q(),o()}b.fn.gfFilterUI=function(a,b,d,e){return c(this,a,b,d,e),this};var w,x,y,z,A,B,C,D,E;String.prototype.format=function(){var a=arguments;return this.replace(/{(\d+)}/g,function(b,c){return void 0!==a[c]?a[c]:b})}}(window.gfFilterUI=window.gfFilterUI||{},jQuery);